<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>cargo php - ext-php-rs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="../getting-started/installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../getting-started/hello_world.html"><strong aria-hidden="true">2.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../getting-started/cargo-php.html" class="active"><strong aria-hidden="true">3.</strong> cargo php</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="../types/index.html"><strong aria-hidden="true">4.</strong> Types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../types/numbers.html"><strong aria-hidden="true">4.1.</strong> Primitive Numbers</a></li><li class="chapter-item expanded "><a href="../types/string.html"><strong aria-hidden="true">4.2.</strong> String</a></li><li class="chapter-item expanded "><a href="../types/str.html"><strong aria-hidden="true">4.3.</strong> &str</a></li><li class="chapter-item expanded "><a href="../types/bool.html"><strong aria-hidden="true">4.4.</strong> bool</a></li><li class="chapter-item expanded "><a href="../types/vec.html"><strong aria-hidden="true">4.5.</strong> Vec</a></li><li class="chapter-item expanded "><a href="../types/hashmap.html"><strong aria-hidden="true">4.6.</strong> HashMap</a></li><li class="chapter-item expanded "><a href="../types/binary.html"><strong aria-hidden="true">4.7.</strong> Binary</a></li><li class="chapter-item expanded "><a href="../types/binary_slice.html"><strong aria-hidden="true">4.8.</strong> BinarySlice</a></li><li class="chapter-item expanded "><a href="../types/option.html"><strong aria-hidden="true">4.9.</strong> Option</a></li><li class="chapter-item expanded "><a href="../types/object.html"><strong aria-hidden="true">4.10.</strong> Object</a></li><li class="chapter-item expanded "><a href="../types/class_object.html"><strong aria-hidden="true">4.11.</strong> Class Object</a></li><li class="chapter-item expanded "><a href="../types/closure.html"><strong aria-hidden="true">4.12.</strong> Closure</a></li><li class="chapter-item expanded "><a href="../types/functions.html"><strong aria-hidden="true">4.13.</strong> Functions & methods</a></li><li class="chapter-item expanded "><a href="../macros/async_impl.html"><strong aria-hidden="true">4.14.</strong> Async futures</a></li></ol></li><li class="chapter-item expanded "><a href="../macros/index.html"><strong aria-hidden="true">5.</strong> Macros</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../macros/module.html"><strong aria-hidden="true">5.1.</strong> Module</a></li><li class="chapter-item expanded "><a href="../macros/module_startup.html"><strong aria-hidden="true">5.2.</strong> Module Startup Function</a></li><li class="chapter-item expanded "><a href="../macros/function.html"><strong aria-hidden="true">5.3.</strong> Function</a></li><li class="chapter-item expanded "><a href="../macros/classes.html"><strong aria-hidden="true">5.4.</strong> Classes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../macros/impl.html"><strong aria-hidden="true">5.4.1.</strong> impls</a></li><li class="chapter-item expanded "><a href="../macros/async_impl.html"><strong aria-hidden="true">5.4.2.</strong> async impls</a></li></ol></li><li class="chapter-item expanded "><a href="../macros/constant.html"><strong aria-hidden="true">5.5.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../macros/zval_convert.html"><strong aria-hidden="true">5.6.</strong> ZvalConvert</a></li></ol></li><li class="chapter-item expanded "><a href="../exceptions.html"><strong aria-hidden="true">6.</strong> Exceptions</a></li><li class="chapter-item expanded "><a href="../ini-settings.html"><strong aria-hidden="true">7.</strong> INI Settings</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ext-php-rs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cargo-php"><a class="header" href="#cargo-php"><code>cargo php</code></a></h1>
<p>ext-php-rs comes with a cargo subcommand called <a href="https://crates.io/crates/cargo-php"><code>cargo-php</code></a>. When called in
the manifest directory of an extension, it allows you to do the following:</p>
<ul>
<li>Generate IDE stub files</li>
<li>Install the extension</li>
<li>Remove the extension</li>
</ul>
<h2 id="system-requirements"><a class="header" href="#system-requirements">System Requirements</a></h2>
<p>The subcommand has been tested on the following systems and architectures. Note
these are not requirements, but simply platforms that the application have been
tested on. YMMV.</p>
<ul>
<li>macOS 12.0 (AArch64, x86_64 builds but untested)</li>
<li>Linux 5.15.1 (AArch64, x86_64 builds but untested)</li>
</ul>
<p>Windows is not currently supported by <code>ext-php-rs</code>.</p>
<h3 id="macos-note"><a class="header" href="#macos-note">macOS Note</a></h3>
<p>When installing your extension multiple times without uninstalling on macOS, you
may run into PHP exiting with <code>SIGKILL</code>. You can see the exact cause of the exit
in Console, however, generally this is due to a invalid code signature.
Uninstalling the extension and then reinstalling generally fixes this problem.</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>The subcommand is installed through composer like any other Rust CLI
application:</p>
<pre><code class="language-text">$ cargo install cargo-php
</code></pre>
<p>You can then call the application via <code>cargo php</code> (assuming the cargo
installation directory is in your PATH):</p>
<pre><code class="language-text">$ cargo php --help
cargo-php 0.1.0

David Cole &lt;david.cole1340@gmail.com&gt;

Installs extensions and generates stub files for PHP extensions generated with `ext-php-rs`.

USAGE:
    cargo-php &lt;SUBCOMMAND&gt;

OPTIONS:
    -h, --help
            Print help information

    -V, --version
            Print version information

SUBCOMMANDS:
    help
            Print this message or the help of the given subcommand(s)
    install
            Installs the extension in the current PHP installation
    remove
            Removes the extension in the current PHP installation
    stubs
            Generates stub PHP files for the extension
</code></pre>
<p>The command should always be executed from within your extensions manifest
directory (the directory with your <code>Cargo.toml</code>).</p>
<h2 id="stubs"><a class="header" href="#stubs">Stubs</a></h2>
<p>Stub files are used by your IDEs language server to know the signature of
methods, classes and constants in your PHP extension, similar to how a C header
file works.</p>
<p>One of the largest collection of PHP standard library and non-standard extension
stub files is provided by JetBrains: <a href="https://github.com/JetBrains/phpstorm-stubs#readme">phpstorm-stubs</a>. This collection is used
by JetBrains PhpStorm and the PHP Intelephense language server (which I
personally recommend for use in Visual Studio Code).</p>
<h3 id="usage"><a class="header" href="#usage">Usage</a></h3>
<pre><code class="language-text">$ cargo php stubs --help
cargo-php-stubs

Generates stub PHP files for the extension.

These stub files can be used in IDEs to provide typehinting for extension classes, functions and
constants.

USAGE:
    cargo-php stubs [OPTIONS] [EXT]

ARGS:
    &lt;EXT&gt;
            Path to extension to generate stubs for. Defaults for searching the directory the
            executable is located in

OPTIONS:
    -h, --help
            Print help information

        --manifest &lt;MANIFEST&gt;
            Path to the Cargo manifest of the extension. Defaults to the manifest in the directory
            the command is called.

            This cannot be provided alongside the `ext` option, as that option provides a direct
            path to the extension shared library.

    -o, --out &lt;OUT&gt;
            Path used to store generated stub file. Defaults to writing to `&lt;ext-name&gt;.stubs.php` in
            the current directory

        --stdout
            Print stubs to stdout rather than write to file. Cannot be used with `out`
</code></pre>
<h2 id="extension-installation"><a class="header" href="#extension-installation">Extension Installation</a></h2>
<p>When PHP is in your PATH, the application can automatically build and copy your
extension into PHP. This requires <code>php-config</code> to be installed alongside PHP.</p>
<p>It is recommended to backup your <code>php.ini</code> <strong>before</strong> installing the extension
so you are able to restore if you run into any issues.</p>
<h3 id="usage-1"><a class="header" href="#usage-1">Usage</a></h3>
<pre><code class="language-text">$ cargo php install --help
cargo-php-install

Installs the extension in the current PHP installation.

This copies the extension to the PHP installation and adds the extension to a PHP configuration
file.

Note that this uses the `php-config` executable installed alongside PHP to locate your `php.ini`
file and extension directory. If you want to use a different `php-config`, the application will read
the `PHP_CONFIG` variable (if it is set), and will use this as the path to the executable instead.

USAGE:
    cargo-php install [OPTIONS]

OPTIONS:
        --disable
            Installs the extension but doesn't enable the extension in the `php.ini` file

    -h, --help
            Print help information

        --ini-path &lt;INI_PATH&gt;
            Path to the `php.ini` file to update with the new extension

        --install-dir &lt;INSTALL_DIR&gt;
            Changes the path that the extension is copied to. This will not activate the extension
            unless `ini_path` is also passed

        --manifest &lt;MANIFEST&gt;
            Path to the Cargo manifest of the extension. Defaults to the manifest in the directory
            the command is called

        --release
            Whether to install the release version of the extension

        --yes
            Bypasses the confirmation prompt
</code></pre>
<h2 id="extension-removal"><a class="header" href="#extension-removal">Extension Removal</a></h2>
<p>Removes the extension from your PHPs extension directory, and removes the entry
from your <code>php.ini</code> if present.</p>
<h3 id="usage-2"><a class="header" href="#usage-2">Usage</a></h3>
<pre><code class="language-text">$ cargo php remove --help
cargo-php-remove

Removes the extension in the current PHP installation.

This deletes the extension from the PHP installation and also removes it from the main PHP
configuration file.

Note that this uses the `php-config` executable installed alongside PHP to locate your `php.ini`
file and extension directory. If you want to use a different `php-config`, the application will read
the `PHP_CONFIG` variable (if it is set), and will use this as the path to the executable instead.

USAGE:
    cargo-php remove [OPTIONS]

OPTIONS:
    -h, --help
            Print help information

        --ini-path &lt;INI_PATH&gt;
            Path to the `php.ini` file to remove the extension from

        --install-dir &lt;INSTALL_DIR&gt;
            Changes the path that the extension will be removed from. This will not remove the
            extension from a configuration file unless `ini_path` is also passed

        --manifest &lt;MANIFEST&gt;
            Path to the Cargo manifest of the extension. Defaults to the manifest in the directory
            the command is called

        --yes
            Bypasses the confirmation prompt
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../getting-started/hello_world.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../types/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../getting-started/hello_world.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../types/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
